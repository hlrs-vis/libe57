<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>E57 Simple API V0.6: Main Page</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li class="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>E57 Simple API V0.6 Documentation</h1>
<p>
<h3 align="center">July 11, 2010 </h3><h2><a class="anchor" name="main_Introduction">
Introduction</a></h2>
This browser-based document describes the E57 Simple API (Application Programmer Interface) version 0.52, which is a collection of functions that help a C++ programmer wrap the E57 Foundation API.<h2><a class="anchor" name="main_Read_example">
Reading using the E57 Simple API</a></h2>
An example of a typical use of this interface would be as follows: <code><pre>
	try
	{
Create a ReaderImpl
		_bstr_t bsFile = sFile;			//converts Unicode to UTF-8
		<a class="el" href="classe57_1_1_reader.html" title="This is the E57 Reader class.">e57::Reader</a>	eReader( (char*) bsFile);</pre></code><p>
<code><pre>/////////////////////////////////////////////////////////////
ACCESSING ROOT DATA</pre></code><p>
<code><pre>Read the root
		<a class="el" href="classe57_1_1_e57_root.html" title="The e57::E57Root is a structure that stores the top-level information for the XML...">e57::E57Root</a>	rootHeader;
		eReader.GetE57Root( rootHeader);</pre></code><p>
<code><pre>Access all the root information like
		char* fileGuid = rootHeader.guid.c_str();
		...</pre></code><p>
<code><pre>/////////////////////////////////////////////////////////////
ACCESSING SCAN DATA3D</pre></code><p>
<code><pre>Get the number of scan images available
		int data3DCount = eReader.GetData3DCount();</pre></code><p>
<code><pre>selecting the first scan
		int scanIndex = 0;</pre></code><p>
<code><pre>Read the scan 0 header.
		<a class="el" href="classe57_1_1_data3_d.html" title="The e57::Data3D is a structure that stores the top-level information for a single...">e57::Data3D</a>		scanHeader;
		eReader.ReadData3D( scanIndex, scanHeader);</pre></code><p>
<code><pre>Access all the header information like
		char* scanGuid = scanHeader.guid.c_str();
		...</pre></code><p>
<code><pre>///////////////////////////////////////////////////////////////
ACCESSING SCAN DATA</pre></code><p>
<code><pre>Get the Size of the Scan
		int64_t nColumn = 0;	
		int64_t nRow = 0;
		int64_t nPointsSize = 0;	//Number of points
		int64_t nGroupsSize = 0;	//Number of groups
		eReader.GetData3DSizes( scanIndex, nRow, nColumn, nPointsSize, nGroupsSize);</pre></code><p>
<code><pre>Set up buffers
		double* xBuffer = new double[nPointsSize];
		double* yBuffer = new double[nPointsSize];
		double* zBuffer = new double[nPointsSize];
		CompressedVectorReader dataReader = eReader.SetUpData3DPointsData(
			scanIndex, nPointsSize, xBuffer, yBuffer, zBuffer, NULL);</pre></code><p>
<code><pre>Read the point data
		dataReader.read();</pre></code><p>
<code><pre>... access the data ...</pre></code><p>
<code><pre>Close and clean up
		dataReader.close();
		delete xBuffer;
		delete yBuffer;
		delete zBuffer;</pre></code><p>
<code><pre>/////////////////////////////////////////////////////////////////////
ACCESSING PICTURE IMAGE2D</pre></code><p>
<code><pre>Get the number of picture images available
		int image2DCount = eReader.GetImage2DCount();</pre></code><p>
<code><pre>selecting the first picture
		int pictureIndex = 0;</pre></code><p>
<code><pre>Read the picture 0 header.
		<a class="el" href="classe57_1_1_image2_d.html" title="The e57::Image2D is a structure that stores an image from a camera.">e57::Image2D</a>	pictureHeader;
		eReader.ReadData3D( pictureIndex, pictureHeader);</pre></code><p>
<code><pre>Access all the header information like
		char* pictureGuid = pictureHeader.guid.c_str();
		...</pre></code><p>
<code><pre>/////////////////////////////////////////////////////////////////////
ACCESSING PICTURE IMAGE</pre></code><p>
<code><pre>Get the Size of the Picture
		e57::Image2DProjection	imageProjection;	//like E57_SPHERICAL
		e57::Image2DType	imageType;		//like E57_JPEG_IMAGE
		int64_t			nImageWidth = 0;	
		int64_t			nImageHeight = 0;
		int64_t			nImagesSize = 0;	//Number of bytes in the image
		e57::Image2DType	imageMaskType;		//like E57_PNG_IMAGE_MASK if present
		e57::Image2dType	imageVisualType;	//like E57_JPEG_IMAGE if present</pre></code><p>
<code><pre>		eReader.GetImage2DSizes( pictureIndex, imageProjection, imageType,
			nImageWidth, nImageHeight, nImagesSize, imageMaskType, imageVisualType);</pre></code><p>
<code><pre>Set up buffers
		void* jpegBuffer = new char[nImagesSize];</pre></code><p>
<code><pre>Read the picture data
		eReader.ReadImage2DData(pictureIndex, imageProjection, imageType, jpegBuffer, 0, nImagesSizw);</pre></code><p>
<code><pre>... access the picture and decode ...</pre></code><p>
<code><pre>Close and clean up
		delete jpegBuffer;</pre></code><p>
<code><pre>		eReaer.Close();</pre></code><p>
<code><pre>/////////////////////////////////////////////////////////////////////
CATCH THE ERRORS</pre></code><p>
<code><pre>	} catch(E57Exception&amp; ex) {
		ex.report(__FILE__, __LINE__, __FUNCTION__);
	} catch (std::exception&amp; ex) {
		cerr &lt;&lt; "Got an std::exception, what=" &lt;&lt; ex.what() &lt;&lt; endl;
	} catch (...) {
		cerr &lt;&lt; "Got an unknown exception" &lt;&lt; endl;
	}
</pre></code> </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Jul 13 17:44:20 2010 for E57 Simple API V0.6 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
